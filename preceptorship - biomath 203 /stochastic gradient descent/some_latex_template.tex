\documentclass[11pt,letter,reqno]{article}

%%%%%%%%%%%%%%%%%%%%%% Packages %%%%%%%%%%%%%%%%%%%%%%%

%%%%%% 1. Forming the structure of document

%Allow users to use this template on other subfiles
\usepackage{subfiles}

%for drawing tables with multiple rows in a cell
\usepackage{multirow}

%allow parenthesis for apalike bibliography
\usepackage[round]{natbib}
\setcitestyle{aysep={}}

% Adjust document dimensions
\usepackage[top=3.2cm, bottom=3.2cm, left=2.4cm, right=2.4cm]{geometry}

%label corresponding auhor with asterisk
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

% Use fandy header
\usepackage{fancyhdr}

% Puts the footnote as much to the bottom as possible
\usepackage[bottom]{footmisc}

% Convert EPS to PDF
\usepackage{epstopdf}

% Insert hyperlinks for references
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
}
 
%Table
\usepackage{array}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}} % for centering columns in table

% Create bookmarks
\usepackage{bookmark}

%bold greek symbols
\usepackage{bm}

%double space
\usepackage{setspace}

%%%%%% 2. Fonts and symbols

% AMS packages
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}

% Mathtools package
\usepackage[T1]{fontenc}
\usepackage{mathtools}

% New Tx font
%\usepackage{newtxtext,newtxmath}

\usepackage{mathptmx}
\let\counterwithout\relax
\let\counterwithin\relax


%%%%%% 3. Styles

% Colors
\usepackage{color, colortbl}
\usepackage[svgnames]{xcolor}

% Fancy options for enumerate environment
\usepackage{enumitem}

% Allows simple framing
\usepackage{framed}

% Use cancel symbols
\usepackage{cancel}

% Be able to define algorithms
\usepackage{amsmath}
\usepackage[linesnumbered,ruled]{algorithm2e}

% Packages for subfloats
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float} % here for H placement parameter

% Fancy theorem box
\usepackage{chngcntr}
\usepackage{aliascnt}
\usepackage{tikz}
\usetikzlibrary{shapes.misc,calc}
\usepackage{tcolorbox}
\tcbuselibrary{skins,theorems,breakable}

%%%%%%%%%%%%%%%%%%%%%% Style %%%%%%%%%%%%%%%%%%%%%%%

% Change emph style
\let\emph\relax % there's no \RedeclareTextFontCommand
\DeclareTextFontCommand{\emph}{\bfseries}

%%%%%%%%%%%%%%%%%%%%%% Shortcuts %%%%%%%%%%%%%%%%%%%%%%%

% Define shortcut command
\def\newshortcut#1#2{%
\let#1=\undefined
\newcommand{#1}{#2}}

% Redefine the mappings for calligraphc and blackboard math fonts
\DeclareSymbolFont{usualmathcal}{OMS}{cmsy}{m}{n}
\DeclareSymbolFontAlphabet{\mathcal}{usualmathcal}
\DeclareSymbolFontAlphabet{\mathbb}{AMSb}

% Shorthand for Bold Symbols
\newshortcut{\C}{\mathbb{C}}
\newshortcut{\F}{\mathbb{F}}
\newshortcut{\N}{\mathbb{N}}
\newshortcut{\Q}{\mathbb{Q}}
\newshortcut{\R}{\mathbb{R}}
\newshortcut{\T}{\mathbb{T}}
\newshortcut{\Z}{\mathbb{Z}}
\newshortcut{\D}{\mathbb{D}}

% Shorthand for Calligraphic Symbols
\newshortcut{\cA}{\mathcal{A}}
\newshortcut{\cB}{\mathcal{B}}
\newshortcut{\cC}{\mathcal{C}}
\newshortcut{\cD}{\mathcal{D}}
\newshortcut{\cE}{\mathcal{E}}
\newshortcut{\cF}{\mathcal{F}}
\newshortcut{\cG}{\mathcal{G}}
\newshortcut{\cH}{\mathcal{H}}
\newshortcut{\cI}{\mathcal{I}}
\newshortcut{\cJ}{\mathcal{J}}
\newshortcut{\cK}{\mathcal{K}}
\newshortcut{\cL}{\mathcal{L}}
\newshortcut{\cM}{\mathcal{M}}
\newshortcut{\cN}{\mathcal{N}}
\newshortcut{\cO}{\mathcal{O}}
\newshortcut{\cP}{\mathcal{P}}
\newshortcut{\cQ}{\mathcal{Q}}
\newshortcut{\cR}{\mathcal{R}}
\newshortcut{\cS}{\mathcal{S}}
\newshortcut{\cT}{\mathcal{T}}
\newshortcut{\cU}{\mathcal{U}}
\newshortcut{\cV}{\mathcal{V}}
\newshortcut{\cW}{\mathcal{W}}
\newshortcut{\cX}{\mathcal{X}}
\newshortcut{\cY}{\mathcal{Y}}
\newshortcut{\cZ}{\mathcal{Z}}

% Shorthand for Fraktur Symbols
\newshortcut{\fA}{\mathfrak{A}}
\newshortcut{\fB}{\mathfrak{B}}
\newshortcut{\fC}{\mathfrak{C}}
\newshortcut{\fD}{\mathfrak{D}}
\newshortcut{\fE}{\mathfrak{E}}
\newshortcut{\fF}{\mathfrak{F}}
\newshortcut{\fG}{\mathfrak{G}}
\newshortcut{\fH}{\mathfrak{H}}
\newshortcut{\fI}{\mathfrak{I}}
\newshortcut{\fJ}{\mathfrak{J}}
\newshortcut{\fK}{\mathfrak{K}}
\newshortcut{\fL}{\mathfrak{L}}
\newshortcut{\fM}{\mathfrak{M}}
\newshortcut{\fN}{\mathfrak{N}}
\newshortcut{\fO}{\mathfrak{O}}
\newshortcut{\fP}{\mathfrak{P}}
\newshortcut{\fQ}{\mathfrak{Q}}
\newshortcut{\fR}{\mathfrak{R}}
\newshortcut{\fS}{\mathfrak{S}}
\newshortcut{\fT}{\mathfrak{T}}
\newshortcut{\fU}{\mathfrak{U}}
\newshortcut{\fV}{\mathfrak{V}}
\newshortcut{\fW}{\mathfrak{W}}
\newshortcut{\fX}{\mathfrak{X}}
\newshortcut{\fY}{\mathfrak{Y}}
\newshortcut{\fZ}{\mathfrak{Z}}
\newshortcut{\fa}{\mathfrak{a}}
\newshortcut{\fb}{\mathfrak{b}}
\newshortcut{\fc}{\mathfrak{c}}
\newshortcut{\fd}{\mathfrak{d}}
\newshortcut{\fe}{\mathfrak{e}}
\newshortcut{\ff}{\mathfrak{f}}
\newshortcut{\fg}{\mathfrak{g}}
\newshortcut{\fh}{\mathfrak{h}}
%\newshortcut{\fi}{\mathfrak{i}}
\newshortcut{\fj}{\mathfrak{j}}
\newshortcut{\fk}{\mathfrak{k}}
\newshortcut{\fl}{\mathfrak{l}}
\newshortcut{\fm}{\mathfrak{m}}
\newshortcut{\fn}{\mathfrak{n}}
\newshortcut{\fo}{\mathfrak{o}}
\newshortcut{\fp}{\mathfrak{p}}
\newshortcut{\fq}{\mathfrak{q}}
\newshortcut{\fr}{\mathfrak{r}}
\newshortcut{\fs}{\mathfrak{s}}
\newshortcut{\ft}{\mathfrak{t}}
\newshortcut{\fu}{\mathfrak{u}}
\newshortcut{\fv}{\mathfrak{v}}
\newshortcut{\fw}{\mathfrak{w}}
\newshortcut{\fx}{\mathfrak{x}}
\newshortcut{\fy}{\mathfrak{y}}
\newshortcut{\fz}{\mathfrak{z}}

% Greek letters
\newshortcut{\vaprhi}{\varphi}
\newshortcut{\epsilon}{\varepsilon}

% Special functions
\newshortcut{\arsinh}{\operatorname{arsinh}}
\newshortcut{\arcosh}{\operatorname{arcosh}}
\newshortcut{\artanh}{\operatorname{artanh}}
\newshortcut{\arcsch}{\operatorname{arcsch}}
\newshortcut{\arsech}{\operatorname{arsech}}
\newshortcut{\arcoth}{\operatorname{arcoth}}
\newshortcut{\sign}{\operatorname{sign}}
\newshortcut{\sinc}{\operatorname{sinc}}
\newshortcut{\Log}{\operatorname{Log}}
\newshortcut{\Ei}{\operatorname{Ei}}
\newshortcut{\Si}{\operatorname{Si}}
\newshortcut{\Ci}{\operatorname{Ci}}

%argmax argmin
\usepackage{amsmath}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

% Operators
\newshortcut{\d}{\partial}
\newshortcut{\del}{\nabla}
\newshortcut{\grad}{\operatorname{grad}}
\newshortcut{\div}{\operatorname{div}}
\newshortcut{\Re}{\operatorname{Re}}
\newshortcut{\Im}{\operatorname{Im}}
\newshortcut{\PV}{\operatorname{PV}}
\newshortcut{\supp}{\operatorname{supp}}
\newshortcut{\spec}{\operatorname{spec}}
\newshortcut{\dist}{\operatorname{dist}}
\DeclareMathOperator*{\res}{\operatorname{Res}}
\DeclareRobustCommand{\stirf}{\genfrac{[}{]}{0pt}{}} % Stirling number of the first kind
\DeclareRobustCommand{\stirs}{\genfrac\{\}{0pt}{}} % Stirling number of the first kind
\newshortcut{\bigplus}{\mathop{\Large+}}

%Bold greek symbols
\newshortcut{\bmu}{\bm{\mu}}
\newshortcut{\bbeta}{\bm{\beta}}
\newshortcut{\btheta}{\bm{\theta}}
\newcommand{\bgamma}{\boldsymbol{\gamma}}


%matrices horizontal and vertical bars
\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand*{\horzbar}{\rule[.5ex]{2.5ex}{0.5pt}}

\newcommand*{\eqstar}{\stackrel{\star}{=}}

\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{color}
 
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle}

% Probability
\def\E{\mathop{\rm E\,\!}\nolimits}
\def\Var{\mathop{\rm Var}\nolimits}
\def\Cov{\mathop{\rm Cov}\nolimits}
\def\den{\mathop{\rm den}\nolimits}
\def\midd{\mathop{\,|\,}\nolimits}
\def\sgn{\mathop{\rm sgn}\nolimits}
\def\vec{\mathop{\rm vec}\nolimits}
\def\sinc{\mathop{\rm sinc}\nolimits}
\def\curl{\mathop{\rm curl}\nolimits}
\def\div{\mathop{\rm div}\nolimits}
\def\tr{\mathop{\rm tr}\nolimits}
\def\len{\mathop{\rm len}\nolimits}
\def\dist{\mathop{\rm dist}\nolimits}
\def\prox{\mathop{\rm prox}\nolimits}
\def\amp{\mathop{\:\:\,}\nolimits}
\def\Real{\mathop{\mathbb{R}}\nolimits}
\def\dom{\mathop{\bf dom}\nolimits}
\def\argmin{\mathop{\rm argmin}\nolimits}
\def\argmax{\mathop{\rm argmax}\nolimits}
\def\supp{\mathop{\rm supp}\nolimits}

%bold symbols
\newshortcut{\bzero}{\mathbf{0}}
\newshortcut{\bone}{\mathbf{1}}
\newcommand{\bA}{\mathbf{A}}
\newcommand{\bB}{\mathbf{B}}
\newcommand{\bC}{\mathbf{C}}
\newcommand{\bD}{\mathbf{D}}
\newcommand{\bE}{\mathbf{E}}
\newcommand{\bF}{\mathbf{F}}
\newcommand{\bG}{\mathbf{G}}
\newcommand{\bH}{\mathbf{H}}
\newcommand{\bI}{\mathbf{I}}
\newcommand{\bJ}{\mathbf{J}}
\newcommand{\bK}{\mathbf{K}}
\newcommand{\bL}{\mathbf{L}}
\newcommand{\bM}{\mathbf{M}}
\newcommand{\bN}{\mathbf{N}}
\newcommand{\bO}{\mathbf{O}}
\newcommand{\bP}{\mathbf{P}}
\newcommand{\bQ}{\mathbf{Q}}
\newcommand{\bR}{\mathbf{R}}
\newcommand{\bS}{\mathbf{S}}
\newcommand{\bT}{\mathbf{T}}
\newcommand{\bU}{\mathbf{U}}
\newcommand{\bV}{\mathbf{V}}
\newcommand{\bW}{\mathbf{W}}
\newcommand{\bX}{\mathbf{X}}
\newcommand{\bY}{\mathbf{Y}}
\newcommand{\bZ}{\mathbf{Z}}
\newcommand{\ba}{\mathbf{a}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\bc}{\mathbf{c}}
\newcommand{\bd}{\mathbf{d}}
\newcommand{\be}{\mathbf{e}}
\newcommand{\bff}{\mathbf{f}}
\newcommand{\bg}{\mathbf{g}}
\newcommand{\bh}{\mathbf{h}}
\newcommand{\bi}{\mathbf{i}}
\newcommand{\bj}{\mathbf{j}}
\newcommand{\bk}{\mathbf{k}}
\newcommand{\bl}{\mathbf{l}}
%\newcommand{\bm}{\mathbf{m}}
\newcommand{\bn}{\mathbf{n}}
\newcommand{\bo}{\mathbf{o}}
\newcommand{\bp}{\mathbf{p}}
\newcommand{\bq}{\mathbf{q}}
\newcommand{\br}{\mathbf{r}}
\newcommand{\bs}{\mathbf{s}}
\newcommand{\bt}{\mathbf{t}}
\newcommand{\bu}{\mathbf{u}}
\newcommand{\bv}{\mathbf{v}}
\newcommand{\bw}{\mathbf{w}}
\newcommand{\bx}{\mathbf{x}}
\newcommand{\by}{\mathbf{y}}
\newcommand{\bz}{\mathbf{z}}

%text over symbols
\newcommand\defeq{\mathrel{\stackrel{\makebox[0pt]{\mbox{\normalfont\tiny def}}}{=}}} %equal by definition
\newcommand\iidsim{\mathrel{\stackrel{\makebox[0pt]{\mbox{\normalfont\tiny i.i.d}}}{\sim}}} %distribution is iid
\newcommand\equald{\mathrel{\stackrel{\makebox[0pt]{\mbox{\normalfont\tiny d}}}{=}}} %equal in distribution


\DeclareSymbolFont{symbolsC}{U}{txsyc}{m}{n}
\DeclareMathSymbol{\Perp}{\mathrel}{symbolsC}{121}

\newshortcut{\Exp}{\operatorname{Exp}}
\newshortcut{\Uniform}{\operatorname{Uniform}}
\newshortcut{\Poisson}{\operatorname{Poisson}}
\newshortcut{\Binomial}{\operatorname{Binomial}}

% Linear Algebra
\newshortcut{\id}{\operatorname{id}}
\newshortcut{\tr}{\operatorname{tr}}
\newshortcut{\Tr}{\operatorname{Tr}}
\newshortcut{\rank}{\operatorname{rank}}
\newshortcut{\adj}{\operatorname{adj}}

%positive semi definite
\newshortcut{\psd}{\succeq}
\newshortcut{\pd}{\succ}

% Etc
\newshortcut{\smallgap}{\vspace{1em}}

%%%%%%%%%%%%%%%%%%%%%% Spacing %%%%%%%%%%%%%%%%%%%%%%%

% Change equation spacing
\AtBeginDocument{
\setlength\abovedisplayskip{0.5em}
\setlength\belowdisplayskip{0.5em}
}

% Change paragraph spacing
\setlength{\parskip}{0.4em} % Paragraph skip
\linespread{1.25} % Line spacing

% Change list environment spacing (using enumitem package)
\setlist{itemsep=0em,topsep=0em}

%%%%%%%%%%%%%%%%%%%%%% Theorem Environment %%%%%%%%%%%%%%%%%%%%%%%

% Theorem-style environments
\newtheorem{theorem}{Theorem}
\newtheorem*{theorem*}{Theorem}

\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{lemma*}{Lemma}

\newtheorem{corollary}[theorem]{Corollary}
\newtheorem*{corollary*}{Corollary}

\newtheorem{observation}[theorem]{Observation}
\newtheorem*{observation*}{Observation}

\newtheorem{proposition}[theorem]{Proposition}
\newtheorem*{proposition*}{Proposition}

\newtheorem{claim}[theorem]{Claim}
\newtheorem*{claim*}{Claim}

% Definition-style environments
\theoremstyle{definition}

\newtheorem{assumption}[theorem]{Assumption}
\newtheorem*{assumption*}{Assumption}

\newtheorem{definition}[theorem]{Definition}
\newtheorem*{definition*}{Definition}

\newtheorem{example}[theorem]{Example}
\newtheorem*{example*}{Example}

\newtheorem{exercise}[theorem]{Exercise}
\newtheorem*{exercise*}{Exercise}

% Remark-style environments
\theoremstyle{remark}

\newtheorem{remark}[theorem]{Remark}
\newtheorem*{remark*}{Remark}

%%%%%%%%%%%%%%%%%%%%%% Numbering %%%%%%%%%%%%%%%%%%%%%%%
\makeatletter

% Enumerate numbering
\renewcommand{\labelenumi}{(\arabic{enumi})}
\renewcommand{\labelenumii}{(\alph{enumii})}

% Theorem numbering
\renewcommand{\thetheorem}{\arabic{section}.\arabic{theorem}}
\@addtoreset{theorem}{section}

% Equation numbering
\renewcommand{\theequation}{\arabic{section}.\arabic{equation}}
\@addtoreset{equation}{section}

% Footnote numbering
\renewcommand{\thefootnote}{\arabic{footnote})}

%%%%%%%%%%%%%%%%%%%%%% Styling %%%%%%%%%%%%%%%%%%%%%%%
% Code snippet from
% https://tex.stackexchange.com/questions/120454/theorem-with-separate-tikz-environments-for-header-and-body

\definecolor{mygray}{RGB}{215,215,215}
\definecolor{myblue}{RGB}{17,94,140}

\makeatletter
\tcbset{
	mytheorem/.code args={#1#2#3#4}{%
		\refstepcounter{#2}\label{#4}%
		\pgfkeysalso{title={\setbox\z@=\hbox{#1~\csname the#2\endcsname\ }\hangindent\wd\z@\hangafter=1 \mbox{#1~\csname the#2\endcsname\ }#3}}},%
}

\newcommand{\mtcbmaketheorem}[5]{%
	\newtcolorbox{#1}[3][]{#3,mytheorem={#2}{#4}{##2}{#5:##3},##1}%
}
\makeatother

\tcbset{
	simplestyle/.style={
		breakable,
		freelance,
		fonttitle=\bfseries\sffamily
	},
	thmstyle/.style={
		breakable,
		freelance,
		boxrule=2pt,
		width=\linewidth,
		frame code={%
			\path[fill=myblue,draw=myblue!75!black]
			(frame.north west) -- ([xshift=-8pt]frame.north east) --
			([yshift=-8pt]frame.north east) -- (frame.north east|-interior.north east) --
			(frame.north west|-interior.north west) -- cycle;
		},
		interior titled code={
			\path[fill=mygray!80,draw=mygray]
			(frame.west|-interior.north west) -- (frame.east|-interior.north east) --   
			([yshift=8pt]frame.east|-interior.south east) -- 
			([xshift=-8pt]frame.east|-interior.south east) --
			(frame.west|-interior.south west) -- cycle;
		},
		fonttitle=\bfseries\sffamily
	},
	defstyle/.style={
		breakable,
		freelance,
		boxrule=2pt,
		width=\linewidth,
		frame code={%
			\path[top color=myblue!50,bottom color=myblue!50,
			middle color=myblue!50]
			([xshift=8pt]frame.north west) -- ([xshift=-8pt]frame.north east) --
			([yshift=-8pt]frame.north east) -- 
			(frame.north east|-interior.north east) --
			(frame.north west|-interior.north west) -- 
			([yshift=-8pt]frame.north west) -- cycle;
		},
		interior titled code={
			\path[fill=mygray!80]
			(frame.west|-interior.north west) -| 
			([yshift=8pt]frame.east|-interior.south east) -- 
			([xshift=-8pt]frame.east|-interior.south east) -- 
			([xshift=8pt]frame.west|-interior.south west) -- 
			([yshift=8pt]frame.west|-interior.south west) -- cycle;
			\path[fill=myblue] 
			([xshift=0.5\pgflinewidth,yshift=1.5pt]frame.west|-interior.north west) 
			rectangle 
			([xshift=-0.5\pgflinewidth,yshift=-1.5pt]frame.east|-interior.north east);
		},
		fonttitle=\bfseries\sffamily\normalcolor
	}
}

\mtcbmaketheorem{problembox}{Problem}{simplestyle}{theorem}{ex}
\mtcbmaketheorem{theorembox}{Theorem}{simplestyle}{theorem}{ex}
\mtcbmaketheorem{corollarybox}{Corollary}{simplestyle}{theorem}{ex}
\mtcbmaketheorem{examplebox}{Example}{simplestyle}{theorem}{ex}
\mtcbmaketheorem{definitionbox}{Definition}{simplestyle}{theorem}{ex}

%%%%%%%%%%%%%%%%%%%%%% End of Header %%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\end{document}